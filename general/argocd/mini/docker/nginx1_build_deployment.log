aleksey@first:~/OtusTeam/IaC/general/argocd/mini/docker$ ansible-playbook nginx1_build_deployment.yml 

PLAY [Build and deploy nginx1 to minikube, run and destroy demo] *****************************************************************************************************************************************************************

TASK [Gathering Facts] ***********************************************************************************************************************************************************************************************************
ok: [ac-mini-docker]

TASK [Check the status of minikube.] *********************************************************************************************************************************************************************************************
ok: [ac-mini-docker]

TASK [Start minikube if it's not running.] ***************************************************************************************************************************************************************************************
skipping: [ac-mini-docker]

TASK [Delete Nginx existing service and deployment] ******************************************************************************************************************************************************************************
changed: [ac-mini-docker]

TASK [Wait for 5 seconds] ********************************************************************************************************************************************************************************************************
Pausing for 5 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [ac-mini-docker]

TASK [Remove existing Nginx image] ***********************************************************************************************************************************************************************************************
changed: [ac-mini-docker]

TASK [Create index.html from template on remote host] ****************************************************************************************************************************************************************************
ok: [ac-mini-docker]

TASK [Copy nginx.conf to remote host] ********************************************************************************************************************************************************************************************
ok: [ac-mini-docker]

TASK [Copy Dockerfile to remote host] ********************************************************************************************************************************************************************************************
ok: [ac-mini-docker]

TASK [Build Nginx image] *********************************************************************************************************************************************************************************************************
changed: [ac-mini-docker]

TASK [Create Nginx deployment] ***************************************************************************************************************************************************************************************************
changed: [ac-mini-docker]

TASK [Wait for 15 seconds] *******************************************************************************************************************************************************************************************************
Pausing for 15 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [ac-mini-docker]

TASK [Get Nginx deployment info] *************************************************************************************************************************************************************************************************
ok: [ac-mini-docker]

TASK [Print deployment info] *****************************************************************************************************************************************************************************************************
ok: [ac-mini-docker] => {
    "msg": [
        "NAME: nginx1",
        "READY: 1/1",
        "UP-TO-DATE: 1",
        "AVAILABLE: 1",
        "AGE: 2024-09-17 17:57:14"
    ]
}

TASK [Get Nginx pod info] ********************************************************************************************************************************************************************************************************
ok: [ac-mini-docker]

TASK [Print pod information] *****************************************************************************************************************************************************************************************************
ok: [ac-mini-docker] => {
    "msg": [
        "NAME: nginx1-7bb68ffbbc-8h7gr",
        "READY: 1/1",
        "STATUS: Running",
        "RESTARTS: 0 (unknown)",
        "AGE: 2024-09-17T17:57:15Z"
    ]
}

TASK [Get services info] *********************************************************************************************************************************************************************************************************
ok: [ac-mini-docker]

TASK [Print service information] *************************************************************************************************************************************************************************************************
skipping: [ac-mini-docker]

TASK [Expose Nginx deployment as NodePort service] *******************************************************************************************************************************************************************************
changed: [ac-mini-docker]

TASK [Get services info] *********************************************************************************************************************************************************************************************************
ok: [ac-mini-docker]

TASK [Print service information] *************************************************************************************************************************************************************************************************
ok: [ac-mini-docker] => {
    "msg": [
        "NAME: nginx1",
        "TYPE: NodePort",
        "CLUSTER-IP: 10.103.127.131",
        "EXTERNAL-IP: <pending>",
        "PORT(S): 80:32256/TCP"
    ]
}

TASK [Wait for 5 seconds] ********************************************************************************************************************************************************************************************************
Pausing for 5 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [ac-mini-docker]

TASK [Test Nginx service] ********************************************************************************************************************************************************************************************************
changed: [ac-mini-docker]

TASK [debug] *********************************************************************************************************************************************************************************************************************
ok: [ac-mini-docker] => {
    "test_result.stdout_lines": [
        "<!DOCTYPE html>",
        "<html>",
        "<body>",
        "<h1>Hello</h1>",
        "<p>My IP address is: <script>document.write(\"<b>\" + window.location.hostname + \"</b>\");</script></p>",
        "<p>My name is: nginx1</p>",
        "</body>",
        "</html>"
    ]
}

TASK [Start port forwarding with kubectl] ****************************************************************************************************************************************************************************************
changed: [ac-mini-docker]

TASK [Wait for port forwarding to start] *****************************************************************************************************************************************************************************************
Pausing for 2 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [ac-mini-docker]

TASK [Find the port-forward process ID] ******************************************************************************************************************************************************************************************
changed: [ac-mini-docker]

TASK [Test Nginx service from Internet] ******************************************************************************************************************************************************************************************
ok: [ac-mini-docker -> localhost]

TASK [debug] *********************************************************************************************************************************************************************************************************************
ok: [ac-mini-docker] => {
    "uri_result_external.content": "<!DOCTYPE html>\n<html>\n<body>\n<h1>Hello</h1>\n<p>My IP address is: <script>document.write(\"<b>\" + window.location.hostname + \"</b>\");</script></p>\n<p>My name is: nginx1</p>\n</body>\n</html>\n"
}

TASK [Kill the port-forward process] *********************************************************************************************************************************************************************************************
changed: [ac-mini-docker]

TASK [Delete Nginx existing service and deployment] ******************************************************************************************************************************************************************************
changed: [ac-mini-docker]

TASK [Wait for 5 seconds] ********************************************************************************************************************************************************************************************************
Pausing for 5 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [ac-mini-docker]

TASK [Remove existing Nginx image] ***********************************************************************************************************************************************************************************************
changed: [ac-mini-docker]

PLAY RECAP ***********************************************************************************************************************************************************************************************************************
ac-mini-docker             : ok=31   changed=11   unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   

