aleksey@first:~/OtusTeam/IaC/general/argocd/mini/docker$ ansible-playbook nginx1_port_forward.yml 

PLAY [Build and deploy nginx1 to minikube, run and destroy demo] *****************************************************************************************************************************************************************

TASK [Gathering Facts] ***********************************************************************************************************************************************************************************************************
ok: [ac-mini-docker]

TASK [Test Nginx service] ********************************************************************************************************************************************************************************************************
changed: [ac-mini-docker]

TASK [debug] *********************************************************************************************************************************************************************************************************************
ok: [ac-mini-docker] => {
    "test_result.stdout_lines": [
        "<!DOCTYPE html>",
        "<html>",
        "<body>",
        "<h1>Hello</h1>",
        "<p>My IP address is: <script>document.write(\"<b>\" + window.location.hostname + \"</b>\");</script></p>",
        "<p>My name is: nginx1</p>",
        "</body>",
        "</html>"
    ]
}

TASK [Start port forwarding with kubectl] ****************************************************************************************************************************************************************************************
changed: [ac-mini-docker]

TASK [debug] *********************************************************************************************************************************************************************************************************************
skipping: [ac-mini-docker]

TASK [Получить статус задачи в фоне] *********************************************************************************************************************************************************************************************
ok: [ac-mini-docker]

TASK [debug] *********************************************************************************************************************************************************************************************************************
skipping: [ac-mini-docker]

TASK [Прочитать файл с удаленного хоста] *****************************************************************************************************************************************************************************************
ok: [ac-mini-docker]

TASK [debug] *********************************************************************************************************************************************************************************************************************
skipping: [ac-mini-docker]

TASK [Find the port-forward process ID] ******************************************************************************************************************************************************************************************
changed: [ac-mini-docker]

TASK [debug] *********************************************************************************************************************************************************************************************************************
skipping: [ac-mini-docker]

TASK [Прочитать файл с удаленного хоста] *****************************************************************************************************************************************************************************************
ok: [ac-mini-docker]

TASK [debug] *********************************************************************************************************************************************************************************************************************
skipping: [ac-mini-docker]

TASK [Test Nginx service from Internet] ******************************************************************************************************************************************************************************************
ok: [ac-mini-docker -> localhost]

TASK [debug] *********************************************************************************************************************************************************************************************************************
ok: [ac-mini-docker] => {
    "uri_result_external.content": "<!DOCTYPE html>\n<html>\n<body>\n<h1>Hello</h1>\n<p>My IP address is: <script>document.write(\"<b>\" + window.location.hostname + \"</b>\");</script></p>\n<p>My name is: nginx1</p>\n</body>\n</html>\n"
}

TASK [Kill the port-forward process] *********************************************************************************************************************************************************************************************
fatal: [ac-mini-docker]: FAILED! => {"changed": true, "cmd": "kill 72303\n72381", "delta": "0:00:00.004557", "end": "2024-09-16 19:12:51.519696", "msg": "non-zero return code", "rc": 127, "start": "2024-09-16 19:12:51.515139", "stderr": "/bin/sh: 2: 72381: not found", "stderr_lines": ["/bin/sh: 2: 72381: not found"], "stdout": "", "stdout_lines": []}
...ignoring

PLAY RECAP ***********************************************************************************************************************************************************************************************************************
ac-mini-docker             : ok=11   changed=4    unreachable=0    failed=0    skipped=5    rescued=0    ignored=1   
