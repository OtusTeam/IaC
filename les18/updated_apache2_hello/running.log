(base) za@za-Lenovo-IdeaPad-S340-15IWL:~/try/vagrant/IaC/les18/updated_apache2_hello$ ./run.sh 
++ cat Vagrantfile
# -*- mode: ruby -*-
# vi: set ft=ruby :

# All Vagrant configuration is done below. The "2" in Vagrant.configure
# configures the configuration version (we support older styles for
# backwards compatibility). Please don't change it unless you know what
# you're doing.
Vagrant.configure("2") do |config|
  # The most common configuration options are documented and commented below.
  # For a complete reference, please see the online documentation at
  # https://docs.vagrantup.com.

  # Every Vagrant development environment requires a box. You can search for
  # boxes at https://vagrantcloud.com/search.
  config.vm.box = "jammy64/update"
  config.vm.box_url = "/media/za/1/images/packer_jammy64_update/output-vagrant/package.box"

  # Disable automatic box update checking. If you disable this, then
  # boxes will only be checked for updates when the user runs
  # `vagrant box outdated`. This is not recommended.
  # config.vm.box_check_update = false

  # Create a forwarded port mapping which allows access to a specific port
  # within the machine from a port on the host machine. In the example below,
  # accessing "localhost:8080" will access port 80 on the guest machine.
  # NOTE: This will enable public access to the opened port
  # config.vm.network "forwarded_port", guest: 80, host: 8080

  # Create a forwarded port mapping which allows access to a specific port
  # within the machine from a port on the host machine and only allow access
  # via 127.0.0.1 to disable public access
  # config.vm.network "forwarded_port", guest: 80, host: 8080, host_ip: "127.0.0.1"
  config.vm.network "forwarded_port", guest: 80, host: 8080, host_ip: "127.0.0.1", auto_correct: true

  # Create a private network, which allows host-only access to the machine
  # using a specific IP.
  config.vm.network "private_network", type: "dhcp"

  # Create a public network, which generally matched to bridged network.
  # Bridged networks make the machine appear as another physical device on
  # your network.
  # config.vm.network "public_network"

  # Share an additional folder to the guest VM. The first argument is
  # the path on the host to the actual folder. The second argument is
  # the path on the guest to mount the folder. And the optional third
  # argument is a set of non-required options.
  # config.vm.synced_folder "./data", "/vagrant_data"

  # Disable the default share of the current code directory. Doing this
  # provides improved isolation between the vagrant box and your host
  # by making sure your Vagrantfile isn't accessable to the vagrant box.
  # If you use this you may want to enable additional shared subfolders as
  # shown above.
  # config.vm.synced_folder ".", "/vagrant", disabled: true

  # Provider-specific configuration so you can fine-tune various
  # backing providers for Vagrant. These expose provider-specific options.
  # Example for VirtualBox:
  #
  config.vm.provider "virtualbox" do |vb|
  #   # Display the VirtualBox GUI when booting the machine
  #   vb.gui = true
  #
  #   # Customize the amount of memory on the VM:
    vb.memory = "1024"
  end
  #
  # View the documentation for the provider you are using for more
  # information on available options.

  # Enable provisioning with a shell script. Additional provisioners such as
  # Ansible, Chef, Docker, Puppet and Salt are also available. Please see the
  # documentation for more information about their specific syntax and use.
  config.vm.provision "shell", inline: <<-SHELL
    apt-get update
    apt-get install -y apache2
    echo '<html><body><h1>Hello World!</h1></body></html>' | sudo tee /var/www/html/index.html
  SHELL
end
++ read -n 1 -s -r -p 'press any key to continue...'
press any key to continue...++ echo ''

++ vagrant up
Bringing machine 'default' up with 'virtualbox' provider...
==> default: Importing base box 'jammy64/update'...
==> default: Matching MAC address for NAT networking...
==> default: Setting the name of the VM: updated_apache2_hello_default_1725429256437_1487
==> default: Clearing any previously set network interfaces...
==> default: Preparing network interfaces based on configuration...
    default: Adapter 1: nat
    default: Adapter 2: hostonly
==> default: Forwarding ports...
    default: 80 (guest) => 8080 (host) (adapter 1)
    default: 22 (guest) => 2222 (host) (adapter 1)
==> default: Running 'pre-boot' VM customizations...
==> default: Booting VM...
==> default: Waiting for machine to boot. This may take a few minutes...
    default: SSH address: 127.0.0.1:2222
    default: SSH username: vagrant
    default: SSH auth method: private key
    default: 
    default: Vagrant insecure key detected. Vagrant will automatically replace
    default: this with a newly generated keypair for better security.
    default: 
    default: Inserting generated public key within guest...
    default: Removing insecure key from the guest if it's present...
    default: Key inserted! Disconnecting and reconnecting using new SSH key...
==> default: Machine booted and ready!
==> default: Checking for guest additions in VM...
    default: The guest additions on this VM do not match the installed version of
    default: VirtualBox! In most cases this is fine, but in rare cases it can
    default: prevent things such as shared folders from working properly. If you see
    default: shared folder errors, please make sure the guest additions within the
    default: virtual machine match the version of VirtualBox you have installed on
    default: your host and reload your VM.
    default: 
    default: Guest Additions Version: 6.0.0 r127566
    default: VirtualBox Version: 7.0
==> default: Configuring and enabling network interfaces...
==> default: Mounting shared folders...
    default: /vagrant => /home/za/try/vagrant/IaC/les18/updated_apache2_hello
==> default: Running provisioner: shell...
    default: Running: inline script
    default: Hit:1 http://archive.ubuntu.com/ubuntu jammy InRelease
    default: Get:2 http://archive.ubuntu.com/ubuntu jammy-updates InRelease [128 kB]
    default: Get:3 http://security.ubuntu.com/ubuntu jammy-security InRelease [129 kB]
    default: Hit:4 http://archive.ubuntu.com/ubuntu jammy-backports InRelease
    default: Get:5 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 Packages [1988 kB]
    default: Get:6 http://security.ubuntu.com/ubuntu jammy-security/main amd64 c-n-f Metadata [13.3 kB]
    default: Get:7 http://security.ubuntu.com/ubuntu jammy-security/universe amd64 c-n-f Metadata [19.2 kB]
    default: Get:8 http://archive.ubuntu.com/ubuntu jammy-updates/universe amd64 Packages [1121 kB]
    default: Get:9 http://archive.ubuntu.com/ubuntu jammy-updates/universe amd64 c-n-f Metadata [26.1 kB]
    default: Fetched 3424 kB in 2s (1471 kB/s)
    default: Reading package lists...
    default: Reading package lists...
    default: Building dependency tree...
    default: Reading state information...
    default: The following additional packages will be installed:
    default:   apache2-bin apache2-data apache2-utils bzip2 libapr1 libaprutil1
    default:   libaprutil1-dbd-sqlite3 libaprutil1-ldap liblua5.3-0 mailcap mime-support
    default:   ssl-cert
    default: Suggested packages:
    default:   apache2-doc apache2-suexec-pristine | apache2-suexec-custom www-browser
    default:   bzip2-doc
    default: The following NEW packages will be installed:
    default:   apache2 apache2-bin apache2-data apache2-utils bzip2 libapr1 libaprutil1
    default:   libaprutil1-dbd-sqlite3 libaprutil1-ldap liblua5.3-0 mailcap mime-support
    default:   ssl-cert
    default: 0 upgraded, 13 newly installed, 0 to remove and 210 not upgraded.
    default: Need to get 2141 kB of archives.
    default: After this operation, 8524 kB of additional disk space will be used.
    default: Get:1 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libapr1 amd64 1.7.0-8ubuntu0.22.04.1 [108 kB]
    default: Get:2 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libaprutil1 amd64 1.6.1-5ubuntu4.22.04.2 [92.8 kB]
    default: Get:3 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libaprutil1-dbd-sqlite3 amd64 1.6.1-5ubuntu4.22.04.2 [11.3 kB]
    default: Get:4 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libaprutil1-ldap amd64 1.6.1-5ubuntu4.22.04.2 [9170 B]
    default: Get:5 http://archive.ubuntu.com/ubuntu jammy/main amd64 liblua5.3-0 amd64 5.3.6-1build1 [140 kB]
    default: Get:6 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 apache2-bin amd64 2.4.52-1ubuntu4.12 [1348 kB]
    default: Get:7 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 apache2-data all 2.4.52-1ubuntu4.12 [165 kB]
    default: Get:8 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 apache2-utils amd64 2.4.52-1ubuntu4.12 [89.1 kB]
    default: Get:9 http://archive.ubuntu.com/ubuntu jammy/main amd64 mailcap all 3.70+nmu1ubuntu1 [23.8 kB]
    default: Get:10 http://archive.ubuntu.com/ubuntu jammy/main amd64 mime-support all 3.66 [3696 B]
    default: Get:11 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 apache2 amd64 2.4.52-1ubuntu4.12 [97.9 kB]
    default: Get:12 http://archive.ubuntu.com/ubuntu jammy/main amd64 bzip2 amd64 1.0.8-5build1 [34.8 kB]
    default: Get:13 http://archive.ubuntu.com/ubuntu jammy/main amd64 ssl-cert all 1.1.2 [17.4 kB]
    default: dpkg-preconfigure: unable to re-open stdin: No such file or directory
    default: Fetched 2141 kB in 2s (1006 kB/s)
    default: Selecting previously unselected package libapr1:amd64.
(Reading database ... 63881 files and directories currently installed.)
    default: Preparing to unpack .../00-libapr1_1.7.0-8ubuntu0.22.04.1_amd64.deb ...
    default: Unpacking libapr1:amd64 (1.7.0-8ubuntu0.22.04.1) ...
    default: Selecting previously unselected package libaprutil1:amd64.
    default: Preparing to unpack .../01-libaprutil1_1.6.1-5ubuntu4.22.04.2_amd64.deb ...
    default: Unpacking libaprutil1:amd64 (1.6.1-5ubuntu4.22.04.2) ...
    default: Selecting previously unselected package libaprutil1-dbd-sqlite3:amd64.
    default: Preparing to unpack .../02-libaprutil1-dbd-sqlite3_1.6.1-5ubuntu4.22.04.2_amd64.deb ...
    default: Unpacking libaprutil1-dbd-sqlite3:amd64 (1.6.1-5ubuntu4.22.04.2) ...
    default: Selecting previously unselected package libaprutil1-ldap:amd64.
    default: Preparing to unpack .../03-libaprutil1-ldap_1.6.1-5ubuntu4.22.04.2_amd64.deb ...
    default: Unpacking libaprutil1-ldap:amd64 (1.6.1-5ubuntu4.22.04.2) ...
    default: Selecting previously unselected package liblua5.3-0:amd64.
    default: Preparing to unpack .../04-liblua5.3-0_5.3.6-1build1_amd64.deb ...
    default: Unpacking liblua5.3-0:amd64 (5.3.6-1build1) ...
    default: Selecting previously unselected package apache2-bin.
    default: Preparing to unpack .../05-apache2-bin_2.4.52-1ubuntu4.12_amd64.deb ...
    default: Unpacking apache2-bin (2.4.52-1ubuntu4.12) ...
    default: Selecting previously unselected package apache2-data.
    default: Preparing to unpack .../06-apache2-data_2.4.52-1ubuntu4.12_all.deb ...
    default: Unpacking apache2-data (2.4.52-1ubuntu4.12) ...
    default: Selecting previously unselected package apache2-utils.
    default: Preparing to unpack .../07-apache2-utils_2.4.52-1ubuntu4.12_amd64.deb ...
    default: Unpacking apache2-utils (2.4.52-1ubuntu4.12) ...
    default: Selecting previously unselected package mailcap.
    default: Preparing to unpack .../08-mailcap_3.70+nmu1ubuntu1_all.deb ...
    default: Unpacking mailcap (3.70+nmu1ubuntu1) ...
    default: Selecting previously unselected package mime-support.
    default: Preparing to unpack .../09-mime-support_3.66_all.deb ...
    default: Unpacking mime-support (3.66) ...
    default: Selecting previously unselected package apache2.
    default: Preparing to unpack .../10-apache2_2.4.52-1ubuntu4.12_amd64.deb ...
    default: Unpacking apache2 (2.4.52-1ubuntu4.12) ...
    default: Selecting previously unselected package bzip2.
    default: Preparing to unpack .../11-bzip2_1.0.8-5build1_amd64.deb ...
    default: Unpacking bzip2 (1.0.8-5build1) ...
    default: Selecting previously unselected package ssl-cert.
    default: Preparing to unpack .../12-ssl-cert_1.1.2_all.deb ...
    default: Unpacking ssl-cert (1.1.2) ...
    default: Setting up libapr1:amd64 (1.7.0-8ubuntu0.22.04.1) ...
    default: Setting up bzip2 (1.0.8-5build1) ...
    default: Setting up ssl-cert (1.1.2) ...
    default: Setting up liblua5.3-0:amd64 (5.3.6-1build1) ...
    default: Setting up apache2-data (2.4.52-1ubuntu4.12) ...
    default: Setting up mailcap (3.70+nmu1ubuntu1) ...
    default: Setting up libaprutil1:amd64 (1.6.1-5ubuntu4.22.04.2) ...
    default: Setting up mime-support (3.66) ...
    default: Setting up libaprutil1-ldap:amd64 (1.6.1-5ubuntu4.22.04.2) ...
    default: Setting up libaprutil1-dbd-sqlite3:amd64 (1.6.1-5ubuntu4.22.04.2) ...
    default: Setting up apache2-utils (2.4.52-1ubuntu4.12) ...
    default: Setting up apache2-bin (2.4.52-1ubuntu4.12) ...
    default: Setting up apache2 (2.4.52-1ubuntu4.12) ...
    default: Enabling module mpm_event.
    default: Enabling module authz_core.
    default: Enabling module authz_host.
    default: Enabling module authn_core.
    default: Enabling module auth_basic.
    default: Enabling module access_compat.
    default: Enabling module authn_file.
    default: Enabling module authz_user.
    default: Enabling module alias.
    default: Enabling module dir.
    default: Enabling module autoindex.
    default: Enabling module env.
    default: Enabling module mime.
    default: Enabling module negotiation.
    default: Enabling module setenvif.
    default: Enabling module filter.
    default: Enabling module deflate.
    default: Enabling module status.
    default: Enabling module reqtimeout.
    default: Enabling conf charset.
    default: Enabling conf localized-error-pages.
    default: Enabling conf other-vhosts-access-log.
    default: Enabling conf security.
    default: Enabling conf serve-cgi-bin.
    default: Enabling site 000-default.
    default: Created symlink /etc/systemd/system/multi-user.target.wants/apache2.service → /lib/systemd/system/apache2.service.
    default: Created symlink /etc/systemd/system/multi-user.target.wants/apache-htcacheclean.service → /lib/systemd/system/apache-htcacheclean.service.
    default: Processing triggers for ufw (0.36.1-4build1) ...
    default: Processing triggers for man-db (2.10.2-1) ...
    default: Processing triggers for libc-bin (2.35-0ubuntu3.1) ...
    default: 
    default: Running kernel seems to be up-to-date.
    default: 
    default: No services need to be restarted.
    default: 
    default: No containers need to be restarted.
    default: 
    default: No user sessions are running outdated binaries.
    default: 
    default: No VM guests are running outdated hypervisor (qemu) binaries on this host.
    default: <html><body><h1>Hello World!</h1></body></html>
++ read -n 1 -s -r -p 'press any key to continue...'
press any key to continue...++ echo ''

++ curl http://127.0.0.1:8080
<html><body><h1>Hello World!</h1></body></html>
++ read -n 1 -s -r -p 'press any key to continue...'
press any key to continue...++ echo ''

++ vagrant destroy
    default: Are you sure you want to destroy the 'default' VM? [y/N] y
==> default: Forcing shutdown of VM...
==> default: Destroying VM and associated drives...
++ read -n 1 -s -r -p 'press any key to continue...'
press any key to continue...++ echo ''

++ vagrant status
Current machine states:

default                   not created (virtualbox)

The environment has not yet been created. Run `vagrant up` to
create the environment. If a machine is not created, only the
default provider will be shown. So if a provider is not listed,
then the machine is not created for that environment.

