name: pulumi-hello-yandex
runtime: yaml

resources:
  provider:
    type: pulumi:providers:yandex
    properties:
      token: ${yandex:token}
      cloudId: ${yandex:cloudId}
      folderId: ${yandex:folderId}

  helloBucket:
    type: yandex:index/storageBucket:StorageBucket
    properties:
      name: ${yandex:prefix}-hello-${pulumi.stack}
      folderId: ${yandex:folderId}
      acl: "private"
      versioning:
        enabled: false
    options:
      provider: ${provider}

  helloObject:
    type: yandex:index/storageObject:StorageObject
    properties:
      bucket: ${helloBucket.bucket}    # используем атрибут bucket из StorageBucket
      key: hello.txt
      content: "Hello, World from Pulumi YAML!"
      contentType: "text/plain"
    options:
      provider: ${provider}

outputs:
  bucketName:
    value: ${helloBucket.bucket}
  objectKey:
    value: ${helloObject.key}
