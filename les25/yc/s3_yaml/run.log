za@za-Vivobook-ASUSLaptop-M3504YA-M3504YA:~/Documents/IaC/2git/les25/yc/s3_yaml$ ./run.sh 
++ rm object.txt
rm: невозможно удалить 'object.txt': Нет такого файла или каталога
++ set +x
Enter Pulumi passphrase: 
Created stack 'dev'
++ pulumi config set yandex:cloudId b1glq0cg9jigrj5lcp63
++ pulumi config set yandex:folderId b1glf35jjq6imk8i8k4m
++ pulumi config set prefix les25
++ pulumi up -y
Previewing update (dev):
     Type                                              Name                 Plan       
 +   pulumi:pulumi:Stack                               yc-object-hello-dev  create     
 +   ├─ yandex:index:IamServiceAccount                 sa                   create     
 +   ├─ yandex:index:ResourcemanagerFolderIamMember    saEditor             create     
 +   ├─ yandex:index:StorageObject                     helloObject          create     
 +   ├─ yandex:index:IamServiceAccountStaticAccessKey  saKey                create     
 +   └─ yandex:index:StorageBucket                     bucket               create     

Outputs:
    accessKey : [unknown]
    bucketName: "les25-bucket"
    objectKey : "hello.txt"
    secretKey : [unknown]

Resources:
    + 6 to create

Updating (dev):
     Type                                              Name                 Status              
 +   pulumi:pulumi:Stack                               yc-object-hello-dev  created (10s)       
 +   ├─ yandex:index:IamServiceAccount                 sa                   created (3s)        
 +   ├─ yandex:index:ResourcemanagerFolderIamMember    saEditor             created (2s)        
 +   ├─ yandex:index:IamServiceAccountStaticAccessKey  saKey                created (1s)        
 +   ├─ yandex:index:StorageBucket                     bucket               created (2s)        
 +   └─ yandex:index:StorageObject                     helloObject          created (0.18s)     

Outputs:
    accessKey : "YCAJEQmhnwlAphkfDBNWxboLV"
    bucketName: "les25-bucket"
    objectKey : "hello.txt"
    secretKey : [secret]

Resources:
    + 6 created

Duration: 11s

+++ pulumi stack output bucketName
++ yc storage bucket get les25-bucket
name: les25-bucket
folder_id: b1glf35jjq6imk8i8k4m
anonymous_access_flags:
  read: false
  list: false
  config_read: false
default_storage_class: STANDARD
versioning: VERSIONING_DISABLED
created_at: "2026-02-14T19:00:56.503920Z"
resource_id: e3edlk0i4o82ooa9ssf8

+++ pulumi stack output bucketName
+++ pulumi stack output objectKey
++ yc storage s3api get-object --bucket les25-bucket --key hello.txt ./object.txt
etag: '"65a8e27d8879283831b664bd8b7f0ad4"'
request_id: 4050809a730dc6d7
accept_ranges: bytes
content_length: "13"
content_type: application/octet-stream
last_modified_at: "2026-02-14T19:00:58Z"

++ set +x

Содержимое объекта: Hello, World!

++ rm object.txt
++ read -p 'Press any key to continue...'
Press any key to continue...
++ pulumi destroy -y
Previewing destroy (dev):
     Type                                              Name                 Plan       
 -   pulumi:pulumi:Stack                               yc-object-hello-dev  delete     
 -   ├─ yandex:index:StorageObject                     helloObject          delete     
 -   ├─ yandex:index:StorageBucket                     bucket               delete     
 -   ├─ yandex:index:IamServiceAccountStaticAccessKey  saKey                delete     
 -   ├─ yandex:index:ResourcemanagerFolderIamMember    saEditor             delete     
 -   └─ yandex:index:IamServiceAccount                 sa                   delete     

Outputs:
  - accessKey : "YCAJEQmhnwlAphkfDBNWxboLV"
  - bucketName: "les25-bucket"
  - objectKey : "hello.txt"
  - secretKey : [secret]

Resources:
    - 6 to delete

Destroying (dev):
     Type                                              Name                 Status              
 -   pulumi:pulumi:Stack                               yc-object-hello-dev  deleted (0.00s)     
 -   ├─ yandex:index:StorageObject                     helloObject          deleted (0.27s)     
 -   ├─ yandex:index:StorageBucket                     bucket               deleted (11s)       
 -   ├─ yandex:index:IamServiceAccountStaticAccessKey  saKey                deleted (0.90s)     
 -   ├─ yandex:index:ResourcemanagerFolderIamMember    saEditor             deleted (2s)        
 -   └─ yandex:index:IamServiceAccount                 sa                   deleted (2s)        

Outputs:
  - accessKey : "YCAJEQmhnwlAphkfDBNWxboLV"
  - bucketName: "les25-bucket"
  - objectKey : "hello.txt"
  - secretKey : [secret]

Resources:
    - 6 deleted

Duration: 18s

The resources in the stack have been deleted, but the history and configuration associated with the stack are still maintained. 
If you want to remove the stack completely, run `pulumi stack rm dev`.
++ pulumi stack rm dev -y -f
Stack 'dev' has been removed!
